<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    
    <!-- SEO Meta Tags -->
    <title>GPX Wind Analyzer - Cycling Performance vs Wind Analysis Tool</title>
    <meta name="description" content="Analyze how wind conditions affected your cycling performance. Upload GPX files to get detailed insights into headwinds, tailwinds, and their impact on your ride speed and effort." />
    <meta name="keywords" content="GPX analyzer, cycling wind analysis, bike performance, headwind tailwind, cycling weather, GPS track analysis, cycling computer data" />
    <meta name="author" content="GPX Wind Analyzer" />
    <meta name="robots" content="index, follow" />
    <link rel="canonical" href="https://windgpx.netlify.app/" />
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://windgpx.netlify.app/" />
    <meta property="og:title" content="GPX Wind Analyzer - Cycling Performance vs Wind Analysis" />
    <meta property="og:description" content="Upload your GPX cycling data to analyze how wind conditions affected your ride performance. Get detailed insights into headwinds, tailwinds, and speed variations." />
    <meta property="og:image" content="https://windgpx.netlify.app/Screenshot.jpg" />
    <meta property="og:image:width" content="1200" />
    <meta property="og:image:height" content="630" />
    <meta property="og:site_name" content="GPX Wind Analyzer" />
    
    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image" />
    <meta property="twitter:url" content="https://windgpx.netlify.app/" />
    <meta property="twitter:title" content="GPX Wind Analyzer - Cycling Performance vs Wind Analysis" />
    <meta property="twitter:description" content="Upload your GPX cycling data to analyze how wind conditions affected your ride performance. Free web-based tool for cyclists." />
    <meta property="twitter:image" content="https://windgpx.netlify.app/Screenshot.jpg" />

    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="/favicon.svg" />
    <!-- <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png" />
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png" />
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png" />
    <link rel="manifest" href="/site.webmanifest" /> -->
    
    <!-- Schema.org structured data -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "WebApplication",
      "name": "GPX Wind Analyzer",
      "description": "Web-based tool for analyzing cycling performance against wind conditions using GPX track data and historical weather information",
      "url": "https://windgpx.netlify.app/",
      "applicationCategory": "SportsApplication",
      "operatingSystem": "Web Browser",
      "offers": {
        "@type": "Offer",
        "price": "0",
        "priceCurrency": "USD"
      },
      "featureList": [
        "GPX file upload and analysis",
        "Wind condition visualization",
        "Interactive route mapping",
        "Performance statistics",
        "Historical weather integration"
      ],
      "browserRequirements": "Requires JavaScript and modern web browser"
    }
    </script>

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- External Libraries -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/leaflet.min.js"></script>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/leaflet.min.css"
    />
    <!-- Leaflet Fullscreen Plugin -->
    <script src="https://api.mapbox.com/mapbox.js/plugins/leaflet-fullscreen/v1.0.1/Leaflet.fullscreen.min.js"></script>
    <link
      href="https://api.mapbox.com/mapbox.js/plugins/leaflet-fullscreen/v1.0.1/leaflet.fullscreen.css"
      rel="stylesheet"
    />

    <!-- Observable Plot for interactive charts -->
    <script src="https://cdn.jsdelivr.net/npm/d3@7"></script>
    <script src="https://cdn.jsdelivr.net/npm/@observablehq/plot@0.6"></script>

    <script data-goatcounter="https://windgpx.goatcounter.com/count"
        async src="//gc.zgo.at/count.js"></script>

    <!-- Custom Styles for Leaflet -->
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body class="font-sans bg-gray-50 min-h-screen text-gray-800 leading-relaxed">
    <div class="max-w-6xl mx-auto p-6">

      <h1
        class="text-center text-blue-600/90 hover:text-blue-600 transition-all duration-200 my-8 text-5xl font-medium"
      >
        <a href="/">windgpx</a>
      </h1>

      <div
        class="bg-white rounded-lg p-12 mb-8 shadow-lg border border-gray-200"
      >
        <div class="flex flex-col items-center gap-6">
          <div
            class="p-8 border-2 border-dashed border-blue-600 rounded-lg bg-blue-50 cursor-pointer transition-all duration-200 w-full max-w-md text-center text-blue-600 hover:bg-blue-100 hover:border-blue-700 hover:-translate-y-0.5"
            id="fileDropArea"
          >
            <input type="file" id="gpxFile" accept=".gpx" class="hidden" />
            <label for="gpxFile" class="cursor-pointer block text-center">
              üìÅ Choose GPX File or Drag & Drop<br />
              <small>Analysis will start automatically once loaded</small>
            </label>
          </div>
          <div class="text-center">
            <button
              class="text-blue-600 hover:text-blue-800 underline text-sm font-medium cursor-pointer transition-all duration-200"
              id="loadExampleBtn"
            >
              See example .gpx üîó
            </button>
          </div>
          <div
            class="hidden text-center text-blue-600 font-medium my-8"
            id="loading"
          >
            <div>üå™Ô∏è Fetching wind data and analyzing...</div>
            <div class="w-full h-1 bg-gray-200 rounded overflow-hidden mt-4">
              <div
                class="h-full bg-gradient-to-r from-blue-600 to-blue-400 w-0 transition-all duration-300"
                id="progressFill"
              ></div>
            </div>
          </div>
        </div>
      </div>

      <div class="hidden" id="results">
        <div class="text-center mb-5">
          <button
            class="bg-gray-600 text-white px-4 py-2 rounded text-sm font-medium cursor-pointer transition-all duration-200 uppercase tracking-wide shadow-md hover:bg-gray-700 hover:shadow-lg"
            id="uploadNewBtn"
          >
            üìÅ Upload New File
          </button>
        </div>

        <!-- Two-column layout for sticky map -->
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
          <!-- Sticky Map Column -->
          <div class="lg:sticky lg:top-6 lg:self-start">
            <div
              class="bg-white rounded-lg p-6 shadow-lg border border-gray-200"
            >
              <div class="text-lg font-medium mb-4 text-gray-600 text-center">
                üó∫Ô∏è Interactive Route Map
              </div>
              <div class="mb-4 p-3 bg-gray-100 rounded text-sm">
                <div class="flex items-center gap-2.5 mt-2">
                  <span class="text-xs">Strong Headwind</span>
                  <div
                    class="h-5 border border-gray-300 rounded-full overflow-hidden flex-1 relative bg-gradient-to-r from-orange-600 via-yellow-400 via-gray-400 to-blue-600"
                  >
                    <div
                      class="absolute inset-0 flex items-center justify-between px-2 text-xs font-bold text-white drop-shadow"
                    >
                      <span>15+</span>
                      <span class="text-gray-800 drop-shadow-none">0</span>
                      <span>15+</span>
                    </div>
                  </div>
                  <span class="text-xs">Strong Tailwind</span>
                </div>
                <div class="text-center mt-1 text-xs text-gray-600">
                  Wind Faced (km/h)
                </div>
              </div>
              <div
                id="map"
                class="w-full h-96 border border-gray-200 rounded-lg relative overflow-hidden"
              ></div>
            </div>
          </div>

          <!-- Scrollable Charts Column -->
          <div class="space-y-6">

          <!-- Scrollable Charts Column -->
          <div class="space-y-6">
            <div
              class="bg-white rounded-lg p-6 shadow-lg border border-gray-200"
            >
              <div class="flex justify-between items-center mb-4">
                <div class="text-lg font-medium text-gray-600 text-center">
                  ‚öôÔ∏è Chart Controls
                </div>
                <div class="flex gap-2">
                  <button
                    id="globalTimeBtn"
                    class="bg-gray-100 border border-gray-300 px-3 py-1.5 rounded text-xs cursor-pointer transition-all duration-200 font-sans hover:bg-blue-50 hover:border-blue-600"
                  >
                    Time
                  </button>
                  <button
                    id="globalDistanceBtn"
                    class="bg-blue-600 text-white border border-blue-600 px-3 py-1.5 rounded text-xs cursor-pointer transition-all duration-200 font-sans"
                  >
                    Distance
                  </button>
                </div>
              </div>
            </div>

            <div
              class="bg-white rounded-lg p-6 shadow-lg border border-gray-200 h-64"
            >
              <div class="text-lg font-medium mb-4 text-gray-600 text-center">
                üìà Speed Profile
              </div>
              <div id="speedChart"></div>
            </div>

            <div
              class="bg-white rounded-lg p-6 shadow-lg border border-gray-200 h-64"
            >
              <div class="text-lg font-medium mb-4 text-gray-600 text-center">
                ‚õ∞Ô∏è Elevation Profile
              </div>
              <div id="elevationChart"></div>
            </div>

            <div
              class="bg-white rounded-lg p-6 shadow-lg border border-gray-200 h-64"
            >
              <div class="text-lg font-medium mb-4 text-gray-600 text-center">
                üí® Wind Faced Profile
              </div>
              <div id="windChart"></div>
            </div>

            <div class="bg-white rounded-lg p-6 shadow-lg border border-gray-200">
              <div class="text-lg font-medium mb-4 text-gray-600 text-center">
                üìä Summary Statistics
              </div>
              <div
                class="grid grid-cols-1 md:grid-cols-2 gap-4"
                id="statsGrid"
              ></div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <script type="module" src="script.js"></script>
  </body>
</html>
